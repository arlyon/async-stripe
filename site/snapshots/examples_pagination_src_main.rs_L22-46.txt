# Snapshot of examples/pagination/src/main.rs
# Lines: 22 - 46
# Dedented: true
# Language: rust
# Generated by: src/components/code-from-file.tsx

pub async fn manual_pagination_example(client: &Client) -> Result<(), stripe::StripeError> {
    let mut params = ListCustomer::new().limit(10);

    loop {
        let page = params.send(client).await?;
        if page.data.is_empty() {
            break;
        }

        for customer in &page.data {
            println!("{}", customer.id);
        }

        if !page.has_more {
            break;
        }

        // Set cursor for next loop
        if let Some(last) = page.data.last() {
            params = params.starting_after(last.id.as_str());
        }
    }

    Ok(())
}

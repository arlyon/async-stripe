# Snapshot of examples/errors/src/error_handling_best_practices.rs
# Lines: 63 - 78
# Dedented: true
# Language: rust
# Generated by: src/components/code-from-file.tsx

let key = IdempotencyKey::new("order_12345").unwrap();

let payment = CreatePaymentIntent::new(1000, Currency::USD)
    .customize()
    .request_strategy(RequestStrategy::Idempotent(key))
    .send(client)
    .await;

match payment {
    Ok(payment_intent) => {
        info!("Created payment intent: {}", payment_intent.id);
    }
    Err(e) => {
        error!("Failed to create payment: {}", e);
    }
}
